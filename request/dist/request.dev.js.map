{"version":3,"sources":["request.js"],"names":["reqTimes","request","params","wx","showLoading","title","baseURL","Promise","resolve","reject","url","success","result","data","message","fail","err","complete","hideLoading"],"mappings":";;;;;;;;;;;;;AAAA,IAAIA,QAAQ,GAAG,CAAf;;AACO,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAACC,MAAD,EAAY;AACjCF,EAAAA,QAAQ,GADyB,CAEjC;;AACAG,EAAAA,EAAE,CAACC,WAAH,CAAe;AACbC,IAAAA,KAAK,EAAE;AADM,GAAf,EAHiC,CAMjC;;AACA,MAAMC,OAAO,GAAG,iDAAhB;AACA,SAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtCN,IAAAA,EAAE,CAACF,OAAH,mBACKC,MADL;AAEEQ,MAAAA,GAAG,EAAEJ,OAAO,GAAGJ,MAAM,CAACQ,GAFxB;AAGEC,MAAAA,OAAO,EAAE,iBAACC,MAAD,EAAY;AACnBJ,QAAAA,OAAO,CAACI,MAAM,CAACC,IAAP,CAAYC,OAAb,CAAP,CADmB,CAEnB;AACD,OANH;AAOEC,MAAAA,IAAI,EAAE,cAACC,GAAD,EAAS;AACbP,QAAAA,MAAM,CAACO,GAAD,CAAN;AACD,OATH;AAUEC,MAAAA,QAAQ,EAAE,oBAAM;AACdjB,QAAAA,QAAQ;;AACR,YAAIA,QAAQ,KAAK,CAAjB,EAAoB;AAClB;AACAG,UAAAA,EAAE,CAACe,WAAH;AACD;AACF;AAhBH;AAkBD,GAnBM,CAAP;AAoBD,CA5BM","sourcesContent":["let reqTimes = 0;\r\nexport const request = (params) => {\r\n  reqTimes++;\r\n  // 显示加载中\r\n  wx.showLoading({\r\n    title: \"加载中\",\r\n  });\r\n  // 定义公共的url\r\n  const baseURL = \"https://api-hmugo-web.itheima.net/api/public/v1\";\r\n  return new Promise((resolve, reject) => {\r\n    wx.request({\r\n      ...params,\r\n      url: baseURL + params.url,\r\n      success: (result) => {\r\n        resolve(result.data.message);\r\n        // wx.hideLoading();\r\n      },\r\n      fail: (err) => {\r\n        reject(err);\r\n      },\r\n      complete: () => {\r\n        reqTimes--;\r\n        if (reqTimes === 0) {\r\n          // 关闭正在等待的图标\r\n          wx.hideLoading();\r\n        }\r\n      },\r\n    });\r\n  });\r\n};\r\n"],"file":"request.dev.js"}