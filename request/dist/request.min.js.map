{"version":3,"sources":["request.js"],"names":["reqTimes","request","params","wx","showLoading","title","Promise","resolve","reject","_objectSpread","url","result","data","message","fail","err","complete"],"mappings":"szBAAA,IAAIA,SAAW,EACFC,QAAU,SAACC,GACtBF,WAEAG,GAAGC,YAAY,CACbC,MAAO,QAIT,OAAO,IAAIC,QAAQ,SAACC,EAASC,GAC3BL,GAAGF,QAAHQ,cAAA,GACKP,EADL,CAEEQ,IAJY,kDAIGR,EAAOQ,IAZxBV,QAAW,SAAfW,GAcQJ,EAAQI,EAAOC,KAAKC,UAGtBC,KAAM,SAACC,GAbRX,EAAAA,IAGHY,SAAA,WACgB,MAaVhB,UAXDC,GAAAA","file":"request.min.js","sourcesContent":["let reqTimes = 0;\r\nexport const request = (params) => {\r\n  reqTimes++;\r\n  // 显示加载中\r\n  wx.showLoading({\r\n    title: \"加载中\",\r\n  });\r\n  // 定义公共的url\r\n  const baseURL = \"https://api-hmugo-web.itheima.net/api/public/v1\";\r\n  return new Promise((resolve, reject) => {\r\n    wx.request({\r\n      ...params,\r\n      url: baseURL + params.url,\r\n      success: (result) => {\r\n        resolve(result.data.message);\r\n        // wx.hideLoading();\r\n      },\r\n      fail: (err) => {\r\n        reject(err);\r\n      },\r\n      complete: () => {\r\n        reqTimes--;\r\n        if (reqTimes === 0) {\r\n          // 关闭正在等待的图标\r\n          wx.hideLoading();\r\n        }\r\n      },\r\n    });\r\n  });\r\n};\r\n"]}