{"version":3,"sources":["index.js"],"names":["_request","require","_runtime","_interopRequireDefault","_asyncWX","Page","handleGetUserInfo","e","_e$detail","encryptedData","errMsg","iv","rawData","code","async","_context","prev","next","detail","awrap","login","sent","wx","setStorageSync","loginParams","stop"],"mappings":"aAGA,IAAAA,SAAAC,QAAA,4BACAC,SAAAC,uBAAAF,QAAA,8BACAG,SAAAH,QAAA,kGAAAI,KAAA,CAEQC,kBAFR,SAE0BC,GAF1B,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAX,SAAA,QAAAY,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAA,OAAAT,EAImDD,EAAEW,OAAzCT,EAJZD,EAIYC,cAAeC,EAJ3BF,EAI2BE,OAAQC,EAJnCH,EAImCG,GAAIC,EAJvCJ,EAIuCI,QAJvCG,EAAAE,KAAA,EAAAf,SAAA,QAAAiB,OAJA,EAAAf,SAAAgB,UAIA,KAAA,EAJAP,EAIAE,EAAAM,KACK,CAAAZ,cAAAA,EAAAC,OAAAA,EAAAC,GAAAA,EAAAC,QAAAA,EAAAC,KAAAA,GAgBDS,GAAGC,eAhBF,QAAA,2JAKKV,GAAAA,aALL,CAOKW,MAAAA,IARV,KAAA,EAAA,IAAA,MAAA,OAAAT,EAAAU","file":"index.min.js","sourcesContent":["// pages/auth/index.js\n// https://api-hmugo-web.itheima.net/api/public/v1/users/wxlogin\n\nimport { request } from \"../../request/request.js\";\nimport regeneratorRuntime from \"../../lib/runtime/runtime\";\nimport { login } from \"../../utils/asyncWX.js\";\nPage({\n  async handleGetUserInfo(e) {\n    // 获取用户信息\n    const { encryptedData, errMsg, iv, rawData } = e.detail;\n    // 获取小程序登录成功后的code值\n    const code = await login();\n    // 发送请求 获取用户token值\n    const loginParams = { encryptedData, errMsg, iv, rawData, code };\n    // const { token } = await request({\n    //   url: \"/users/wxlogin\",\n    //   data: loginParams,\n    //   method: \"post\",\n    // });\n    // 因为获取不到 所以模拟一个token\n\n    // 把token存入缓存中\n    wx.setStorageSync(\n      \"token\",\n      \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWQiOjIzLCJpYXQiOjE1NjQ3MzAwNzksImV4cCI6MTAwMTU2NDczMDA3OH0.YPt-XeLnjV-_1ITaXGY2FhxmCe4NvXuRnRB8OMCfnPo\"\n    );\n    // 成功之后跳回去\n    wx.navigateBack({\n      // 返回上一层 2为上两层\n      delta: 1,\n    });\n  },\n});\n"]}