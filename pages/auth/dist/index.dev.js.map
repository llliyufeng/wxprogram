{"version":3,"sources":["index.js"],"names":["Page","handleGetUserInfo","e","detail","encryptedData","errMsg","iv","rawData","code","loginParams","wx","setStorageSync","navigateBack","delta"],"mappings":";;AAGA;;AACA;;AACA;;;;AALA;AACA;AAKAA,IAAI,CAAC;AACGC,EAAAA,iBADH,6BACqBC,CADrB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAED;AAFC,wBAG8CA,CAAC,CAACC,MAHhD,EAGOC,aAHP,aAGOA,aAHP,EAGsBC,MAHtB,aAGsBA,MAHtB,EAG8BC,EAH9B,aAG8BA,EAH9B,EAGkCC,OAHlC,aAGkCA,OAHlC,EAID;;AAJC;AAAA,6CAKkB,qBALlB;;AAAA;AAKKC,YAAAA,IALL;AAMD;AACMC,YAAAA,WAPL,GAOmB;AAAEL,cAAAA,aAAa,EAAbA,aAAF;AAAiBC,cAAAA,MAAM,EAANA,MAAjB;AAAyBC,cAAAA,EAAE,EAAFA,EAAzB;AAA6BC,cAAAA,OAAO,EAAPA,OAA7B;AAAsCC,cAAAA,IAAI,EAAJA;AAAtC,aAPnB,EAQD;AACA;AACA;AACA;AACA;AACA;AAEA;;AACAE,YAAAA,EAAE,CAACC,cAAH,CACE,OADF,EAEE,yJAFF,EAhBC,CAoBD;;AACAD,YAAAA,EAAE,CAACE,YAAH,CAAgB;AACd;AACAC,cAAAA,KAAK,EAAE;AAFO,aAAhB;;AArBC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAD,CAAJ","sourcesContent":["// pages/auth/index.js\n// https://api-hmugo-web.itheima.net/api/public/v1/users/wxlogin\n\nimport { request } from \"../../request/request.js\";\nimport regeneratorRuntime from \"../../lib/runtime/runtime\";\nimport { login } from \"../../utils/asyncWX.js\";\nPage({\n  async handleGetUserInfo(e) {\n    // 获取用户信息\n    const { encryptedData, errMsg, iv, rawData } = e.detail;\n    // 获取小程序登录成功后的code值\n    const code = await login();\n    // 发送请求 获取用户token值\n    const loginParams = { encryptedData, errMsg, iv, rawData, code };\n    // const { token } = await request({\n    //   url: \"/users/wxlogin\",\n    //   data: loginParams,\n    //   method: \"post\",\n    // });\n    // 因为获取不到 所以模拟一个token\n\n    // 把token存入缓存中\n    wx.setStorageSync(\n      \"token\",\n      \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWQiOjIzLCJpYXQiOjE1NjQ3MzAwNzksImV4cCI6MTAwMTU2NDczMDA3OH0.YPt-XeLnjV-_1ITaXGY2FhxmCe4NvXuRnRB8OMCfnPo\"\n    );\n    // 成功之后跳回去\n    wx.navigateBack({\n      // 返回上一层 2为上两层\n      delta: 1,\n    });\n  },\n});\n"],"file":"index.dev.js"}