"use strict";var _request=require("../../request/request.js"),_runtime=_interopRequireDefault(require("../../lib/runtime/runtime"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}Page({data:{MenuList:[],MenuDetail:[],currentIndex:0,scrollTop:0},CartData:[],onLoad:function(){var t=wx.getStorageSync("cartData");if(t)if(1e4<Date.now()-t.time)this.getCartData(),console.log("不能使用旧的数据");else{console.log("可以使用旧数据"),this.CartData=t.data,console.log(this.CartData);var e=this.CartData.map(function(t){return t.cat_name}),a=this.CartData[0].children;this.setData({MenuList:e,MenuDetail:a})}else this.getCartData(),console.log("不存在")},getCartData:function(){var e,a,r;return _runtime.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_runtime.default.awrap((0,_request.request)({url:"/categories"}));case 2:e=t.sent,this.CartData=e,wx.setStorageSync("cartData",{time:Date.now(),data:this.CartData}),a=this.CartData.map(function(t){return t.cat_name}),r=this.CartData[0].children,this.setData({MenuList:a,MenuDetail:r});case 8:case"end":return t.stop()}},null,this)},handleMenuList:function(t){var e=t.currentTarget.dataset.index,a=this.CartData[e].children;this.setData({currentIndex:e,MenuDetail:a,scrollTop:0})}});
//# sourceMappingURL=index.min.js.map
