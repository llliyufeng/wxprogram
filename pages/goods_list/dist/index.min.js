"use strict";var _request=require("../../request/request.js"),_runtime=_interopRequireDefault(require("../../lib/runtime/runtime"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}Page({data:{tabs:[{id:0,value:"综合",isActive:!0},{id:1,value:"销量",isActive:!1},{id:2,value:"价格",isActive:!1}],goodList:[],totalPage:""},Queryparams:{query:"",cid:"",pagenum:1,pagesize:10},onLoad:function(t){this.Queryparams.cid=t.cid,this.getGoodList()},handleTabsItemChange:function(t){var a=t.detail.index,e=this.data.tabs;e.forEach(function(t,e){t.isActive=e===a}),this.setData({tabs:e})},getGoodList:function(){var e,a;return _runtime.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_runtime.default.awrap((0,_request.request)({url:"/goods/search",data:this.Queryparams}));case 2:e=t.sent,1,a=e.total,this.totalPage=Math.ceil(a/this.Queryparams.pagesize),this.setData({goodList:[].concat(_toConsumableArray(this.data.goodList),_toConsumableArray(e.goods))}),wx.stopPullDownRefresh();case 8:case"end":return t.stop()}},null,this)},onReachBottom:function(){this.Queryparams.pagenum>=this.totalPage?wx.showToast({title:"没有下一页了"}):(this.Queryparams.pagenum++,this.getGoodList())},onPullDownRefresh:function(){this.setData({goodList:[]}),this.Queryparams.pagenum=1,this.getGoodList()}});
//# sourceMappingURL=index.min.js.map
