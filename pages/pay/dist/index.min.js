"use strict";var _runtime=_interopRequireDefault(require("../../lib/runtime/runtime")),_request=require("../../request/request.js");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Page({data:{address:{},cart:[],totalPrice:0,totalNum:0},onShow:function(){var e=wx.getStorageSync("address"),t=wx.getStorageSync("cart")||[];t=t.filter(function(e){return e.checked}),e.all=e.provinceName+e.cityName+e.countyName+e.detailInfo;var r=0,a=0;t.forEach(function(e){r+=e.goods_price*e.num,a+=e.num}),this.setData({cart:t,totalPrice:r,totalNum:a,address:e}),wx.setStorageSync("cart",t)},handleOrderPay:function(){var t,r,a,n,o,i,u,s;return _runtime.default.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(wx.setStorageSync("token","Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWQiOjIzLCJpYXQiOjE1NjQ3MzAwNzksImV4cCI6MTAwMTU2NDczMDA3OH0.YPt-XeLnjV-_1ITaXGY2FhxmCe4NvXuRnRB8OMCfnPo"),t=wx.getStorageSync("token")){e.next=5;break}return wx.navigateTo({url:"/pages/auth/index"}),e.abrupt("return");case 5:return console.log("Yijing cunzai "),r={Authorization:t},a=this.data.totalPrice,n=this.data.address.all,o=this.data.cart,i=[],o.forEach(function(e){return i.push({goods_id:e.goods_id,goods_number:e.goods_num,goods_price:e.goods_price})}),u={order_price:a,consignee_addr:n,goods:i},e.next=15,_runtime.default.awrap((0,_request.request)({url:"/my/orders/create",method:"post",data:u,header:r}));case 15:s=e.sent,console.log(s);case 17:case"end":return e.stop()}},null,this)}});
//# sourceMappingURL=index.min.js.map
